<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Notes for developers &mdash; friendly_data 0.2.2.dev documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Package" href="api/external.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> friendly_data
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">How to install?</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-package.html">Data package</a></li>
<li class="toctree-l1"><a class="reference internal" href="registry.html">Data registry</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/registry.html">Value columns - <code class="docutils literal notranslate"><span class="pre">cols</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="api/registry.html#index-columns-idxcols">Index columns - <code class="docutils literal notranslate"><span class="pre">idxcols</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="api/index-file.html">The Package Index file</a></li>
<li class="toctree-l2"><a class="reference internal" href="registry.html#contributing-to-the-registry">Contributing to the registry</a><ul>
<li class="toctree-l3"><a class="reference internal" href="registry.html#where-to-add-the-new-column">Where to add the new column?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="registry.html#defining-a-custom-registry">Defining a custom registry</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">The <code class="docutils literal notranslate"><span class="pre">friendly_data</span></code> tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="config-file.html">The configuration file</a></li>
<li class="toctree-l1"><a class="reference internal" href="hands-on.html">Hands-on tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="hands-on.html#understanding-the-registry-used-by-friendly-data">Understanding the registry used by Friendly data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="hands-on.html#column-schema">Column schema</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="hands-on.html#learning-by-example">Learning by example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="hands-on.html#introducing-the-index-file">Introducing the index file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="hands-on.html#metadata">Metadata</a><ul>
<li class="toctree-l3"><a class="reference internal" href="hands-on.html#updating-existing-packages">Updating existing packages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="iamc-conversion.html">Converting to IAMC format</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#api-documentation">API documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/api.html">Datapackage tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/api.html#module-friendly_data.metatools">Metadata tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/api.html#module-friendly_data.registry">Registry API</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/api.html#module-friendly_data.cli">Command Line Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/api.html#module-friendly_data.validate">Validation functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/api.html#data-analysis-interface">Data analysis interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/api.html#module-friendly_data.converters">Converters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/api.html#module-friendly_data.tseries">Time series API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/api.html#module-friendly_data.iamc">Conversion to IAMC</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/api.html#internal-interfaces">Internal interfaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/api.html#module-friendly_data.io">File I/O</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/api.html#module-friendly_data.helpers">Helper utilities</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#external-packages">External Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/external.html">Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/external.html#id2">Resource</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Notes for developers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#adding-dependencies">Adding dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-the-data-package-api">Working with the data package API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-the-index-file">Working with the index file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-the-registry-api">Working with the registry API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#converters-interfacing-with-the-python-ecosystem">Converters: interfacing with the Python ecosystem</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">friendly_data</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Notes for developers</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/devnotes.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="notes-for-developers">
<h1>Notes for developers<a class="headerlink" href="#notes-for-developers" title="Permalink to this heading"></a></h1>
<section id="adding-dependencies">
<h2>Adding dependencies<a class="headerlink" href="#adding-dependencies" title="Permalink to this heading"></a></h2>
<p>If the dependency is minor, i.e.</p>
<ul class="simple">
<li><p>used in only a few places, say restricted to a single module, or</p></li>
<li><p>does not need to be documented, e.g. not visible as type hints, for
function arguments or return type,</p></li>
</ul>
<p>import statements should be hidden inside a function (see
<code class="docutils literal notranslate"><span class="pre">friendly_data.cli</span></code> for examples):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_func</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">dependency</span> <span class="kn">import</span> <span class="n">feature</span>
    <span class="c1"># use `feature`</span>
</pre></div>
</div>
<p>If you really have to add a dependency,</p>
<ul class="simple">
<li><p>update the list of mocked modules in <code class="docutils literal notranslate"><span class="pre">doc/conf.py</span></code>, and</p></li>
<li><p>may need to update patch to <code class="docutils literal notranslate"><span class="pre">requirements*.txt</span></code> for CI:
<code class="docutils literal notranslate"><span class="pre">dev/requirements*.patch</span></code>.</p></li>
</ul>
</section>
<section id="working-with-the-data-package-api">
<h2>Working with the data package API<a class="headerlink" href="#working-with-the-data-package-api" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>workaround for POSIX compliant paths on Windows, filter paths
through <code class="docutils literal notranslate"><span class="pre">friendly_data.dpkg._ensure_posix</span></code></p></li>
<li><p>metadata extensions:</p>
<ul>
<li><p>always use <code class="docutils literal notranslate"><span class="pre">alias</span></code>-aware functions like
<a class="reference internal" href="api/api.html#friendly_data.dpkg.get_aliased_cols" title="friendly_data.dpkg.get_aliased_cols"><code class="xref py py-func docutils literal notranslate"><span class="pre">friendly_data.dpkg.get_aliased_cols()</span></code></a></p></li>
</ul>
</li>
<li><p>fill index levels (<code class="docutils literal notranslate"><span class="pre">enum</span></code> values) using
<a class="reference internal" href="api/api.html#friendly_data.dpkg.index_levels" title="friendly_data.dpkg.index_levels"><code class="xref py py-func docutils literal notranslate"><span class="pre">friendly_data.dpkg.index_levels()</span></code></a>. note that this reads the
resource using <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, so there is a performance cost to each
call</p></li>
</ul>
</section>
<section id="working-with-the-index-file">
<h2>Working with the index file<a class="headerlink" href="#working-with-the-index-file" title="Permalink to this heading"></a></h2>
<p>The index file represents as a list of records for each dataset/file
in the data package.  This should be always read using the
<a class="reference internal" href="api/api.html#friendly_data.dpkg.pkgindex" title="friendly_data.dpkg.pkgindex"><code class="xref py py-class docutils literal notranslate"><span class="pre">friendly_data.dpkg.pkgindex</span></code></a>.  The class also provides methods
to conveniently iterate over records with certain guarantees (see the
API docs).</p>
</section>
<section id="working-with-the-registry-api">
<h2>Working with the registry API<a class="headerlink" href="#working-with-the-registry-api" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>If you want to work with the registry that is published on GH/PyPI,
you should use the functions provided by <code class="docutils literal notranslate"><span class="pre">friendly_data_registry</span></code>.</p></li>
<li><p>If you want to work with a registry that is user customisable (from
a config file, or a dictionary), use the context manager and wrapper
functions provided by <code class="docutils literal notranslate"><span class="pre">friendly_data.registry</span></code>.</p></li>
</ul>
</section>
<section id="converters-interfacing-with-the-python-ecosystem">
<h2>Converters: interfacing with the Python ecosystem<a class="headerlink" href="#converters-interfacing-with-the-python-ecosystem" title="Permalink to this heading"></a></h2>
<p>All converters internally use the pandas converter for dataframes.  If
additional converters are added, they should continue to follow this
convention.  This is prefered as it isolates the implementation of
custom extensions to the frictionless specification (like the
<code class="docutils literal notranslate"><span class="pre">alias</span></code> functionality) to a limited number of functions:
<a class="reference internal" href="api/api.html#friendly_data.converters.to_df" title="friendly_data.converters.to_df"><code class="xref py py-func docutils literal notranslate"><span class="pre">friendly_data.converters.to_df()</span></code></a> and
<a class="reference internal" href="api/api.html#friendly_data.converters.from_df" title="friendly_data.converters.from_df"><code class="xref py py-func docutils literal notranslate"><span class="pre">friendly_data.converters.from_df()</span></code></a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="api/external.html" class="btn btn-neutral float-left" title="Package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Suvayu Ali and contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>